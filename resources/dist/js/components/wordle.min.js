"use strict";var Wordle={afterRenderCallback:[],guessTryNotEnoughLettersCallback:[],guessTryNotInWordListCallback:[],gameOverWinCallback:[],gameOverLoseCallback:[],shareStatsCallback:[],maxNumberOfGuesses:6,maxNumberOfLetters:5,animation:{checkGuessLettersDelayInSeconds:.2},letterFlags:{correct:{status:"correct",bgColor:"#5BC05B",emoji:"ðŸŸ©",color:"#FFF"},present:{status:"present",bgColor:"#FFFF8E",emoji:"ðŸŸ¨",color:"#434343"},absent:{status:"absent",bgColor:"#BEBEBE",emoji:"â¬›",color:"#434343"}},wjsn:"",wjsx:"",remainingGuessesCounter:0,letterCounter:0,currentGuessLettersCollection:[],processLettersCollection:[],stats:{winInGuesssNumber:0,progress:[]},completedOn:null,wotd:"",lookUpCollection:[],elements:{wjsGameBoardId:"wjs_game_board",wjsKeyboardId:"wjs_keyboard",wjsShareId:"wjs_share",wjsKeyboardRowKeypadClass:"wjs-keyboard-row__keypad",wjsGameBoardLetterContainerClass:"wjs-game-board-letter-container",wjsGameBoardLetterItemClass:"wjs-game-board-letter-item",wjsGameBoardLetterItemModifierFilledClass:"-filled",wjsGameBoardLetterItemModifierSubmittedClass:"-submitted"},setWjsx:function(e){this.wjsx=btoa(".32541."+e.slice(0,3)+"0789.123456."+e.slice(3)+"1345.")},collection:{getCurrentGuessContainerElement:function(){var e=Wordle;return document.getElementsByClassName(e.elements.wjsGameBoardLetterContainerClass)[e.maxNumberOfGuesses-e.remainingGuessesCounter]},getGuessContainerElement:function(e){return document.getElementsByClassName(Wordle.elements.wjsGameBoardLetterContainerClass)[e]},getKeypadsElement:function(){return document.getElementsByClassName(Wordle.elements.wjsKeyboardRowKeypadClass)}},process:{executeCallback:function(e,t){var s=Wordle;if(void 0!==s[e]&&Array.isArray(s[e]))for(var r in void 0===t&&(t=null),s[e])"function"==typeof s[e][r]&&s[e][r](t)},checkGuessLetters:function(){var e=Wordle,t=e.currentGuessLettersCollection.join("");if(t.length!==e.maxNumberOfLetters)e.process.executeCallback("guessTryNotEnoughLettersCallback",e.maxNumberOfLetters-t.length);else if(e.lookUpCollection.includes(t)){for(var s=atob(e.wjsx).replace(/(\d)|(\.)/gm,""),r=[],o=Array.from(s),a=(e.process.filterCorrectLetters(r,o),e.process.filterPresentLetters(r,o),e.collection.getCurrentGuessContainerElement()),n=[],l=0;l<r.length;l++)e.process.shadeGuessLetters(l,a.children[l],r[l]),n.push(r[l].flags.emoji);if(e.processLettersCollection.push(r),e.stats.progress.push(n),t===s)return e.stats.winInGuesssNumber=e.maxNumberOfGuesses-e.remainingGuessesCounter+1,e.remainingGuessesCounter=0,e.completedOn=Date.now(),e.process.executeCallback("gameOverWinCallback",s),void e.saveData();e.remainingGuessesCounter--,e.currentGuessLettersCollection=[],e.letterCounter=0,e.remainingGuessesCounter<=0&&(e.completedOn=Date.now(),e.process.executeCallback("gameOverLoseCallback",s)),e.saveData()}else e.process.executeCallback("guessTryNotInWordListCallback")},filterCorrectLetters:function(e,t){for(var s=Wordle,r=0;r<s.maxNumberOfLetters;r++){var o=s.currentGuessLettersCollection[r],a=s.letterFlags.absent;o===t[r]&&(a=s.letterFlags.correct,t[t.indexOf(o)]="-"),e.push({letter:o,flags:a})}},filterPresentLetters:function(e,t){for(var s=Wordle,r=0;r<e.length;r++){var o=t.indexOf(e[r].letter);0<=o&&e[r].flags.status===s.letterFlags.absent.status&&(e[r].flags=s.letterFlags.present,t[o]="-")}},shadeGuessLetters:function(e,t,s){var r,o,a,n,l=Wordle;r=t,o=s.letter,a=s.flags.bgColor,n=s.flags.color,setTimeout(function(){r.classList.add("pulse"),r.addEventListener("animationend",function(e){e.stopPropagation(),r.classList.remove("pulse")},{once:!0}),r.classList.add(l.elements.wjsGameBoardLetterItemModifierSubmittedClass),r.setAttribute("data-bg-color",a),r.style.backgroundColor=a,r.setAttribute("data-color",n),r.style.color=n,l.process.shadeKeyboard(o,a,n)},1e3*l.animation.checkGuessLettersDelayInSeconds*e)},shadeKeyboard:function(e,t,s){var r,o=Wordle,a=o.collection.getKeypadsElement();for(r in a)if(a[r].getAttribute("data-key")===e){a[r].getAttribute("data-bg-color")!==o.letterFlags.correct.bgColor&&(a[r].setAttribute("data-bg-color",t),a[r].style.backgroundColor=t,a[r].setAttribute("data-color",s),a[r].style.color=s);break}}},actions:{addLetter:function(e){var t,s=Wordle;s.letterCounter>=s.maxNumberOfLetters||(e=e.toLowerCase(),(t=s.collection.getCurrentGuessContainerElement().children[s.letterCounter]).classList.add("pulse"),t.addEventListener("animationend",function(e){e.stopPropagation(),t.classList.remove("pulse")},{once:!0}),t.textContent=e,t.classList.add(s.elements.wjsGameBoardLetterItemModifierFilled),s.currentGuessLettersCollection.push(e),s.letterCounter++)},deleteLetter:function(){var e=Wordle,t=e.collection.getCurrentGuessContainerElement().children[e.letterCounter-1];t.textContent="",t.classList.remove(e.elements.wjsGameBoardLetterItemModifierFilled),e.currentGuessLettersCollection.pop(),e.letterCounter--}},events:{onKeyUp:function(){var s=Wordle;document.addEventListener("keyup",function(e){var t;0===s.remainingGuessesCounter||"Backspace"===(e=String(e.key))&&s.letterCounter<=0||("Backspace"===e&&0<s.letterCounter?s.actions.deleteLetter():"Enter"===e?s.process.checkGuessLetters():1<e.length||(!(t=e.match(/^(([a-z])(?![0-9]))|^(([A-Z])(?![0-9]))/gi))||1<t.length||s.actions.addLetter(e)))})},onClickKeyPad:function(){var s=Wordle;document.getElementById(s.elements.wjsKeyboardId).addEventListener("click",function(e){var t=e.target;t.classList.contains(s.elements.wjsKeyboardRowKeypadClass)&&0!==s.remainingGuessesCounter&&(t.classList.add("pulse"),t.addEventListener("animationend",function(e){e.stopPropagation(),t.classList.remove("pulse")},{once:!0}),e=t.getAttribute("data-key"),document.dispatchEvent(new KeyboardEvent("keyup",{key:e})))})},onClickShareStats:function(){var t=Wordle;document.getElementById(t.elements.wjsShareId).addEventListener("click",function(e){t.process.executeCallback("shareStatsCallback")})}},saveData:function(){var e;BaseLocalStorage.isSupported()&&(e=this,BaseLocalStorage.set("wjs",JSON.stringify({wjsn:e.wjsn,wjsx:("0wjx"+btoa(e.wjsx)).replace("==",""),stats:e.stats,remainingGuessesCounter:e.remainingGuessesCounter,letterCounter:e.letterCounter,currentGuessLettersCollection:e.currentGuessLettersCollection,processLettersCollection:e.processLettersCollection,completedOn:e.completedOn,wotd:e.wotd})))},loadData:function(){var e,t;BaseLocalStorage.isSupported()&&(e=this,(t=BaseLocalStorage.get("wjs"))&&(t=JSON.parse(t),e.wjsn=t.wjsn,e.wjsx=atob(t.wjsx.substring(4)),e.stats=t.stats,e.remainingGuessesCounter=t.remainingGuessesCounter,e.letterCounter=t.letterCounter,e.currentGuessLettersCollection=t.currentGuessLettersCollection,e.processLettersCollection=t.processLettersCollection,e.completedOn=t.completedOn,e.wotd=t.wotd))},prepareBoardTemplate:function(){for(var e=this,t=document.getElementById(e.elements.wjsGameBoardId),s=0;s<e.maxNumberOfGuesses;s++){var r=document.createElement("div");r.className=e.elements.wjsGameBoardLetterContainerClass;for(var o=0;o<e.maxNumberOfLetters;o++){var a=document.createElement("div");a.className=e.elements.wjsGameBoardLetterItemClass,r.appendChild(a)}t.appendChild(r)}},prepareLoadedData:function(){for(var e=this,t=0;t<e.maxNumberOfGuesses-e.remainingGuessesCounter;t++){var s=e.collection.getGuessContainerElement(t);if(void 0===e.processLettersCollection[t])break;for(var r=0;r<e.processLettersCollection[t].length;r++)s.children[r].textContent=e.processLettersCollection[t][r].letter,e.process.shadeGuessLetters(r,s.children[r],e.processLettersCollection[t][r])}},render:function(){var e=this;e.remainingGuessesCounter=e.maxNumberOfGuesses,e.loadData(),e.prepareBoardTemplate(),e.prepareLoadedData(),e.process.executeCallback("afterRenderCallback")}};